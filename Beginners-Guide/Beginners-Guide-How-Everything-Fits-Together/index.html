<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Beginners Guide How Everything Fits Together - CMaNGOS Docs</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Beginners Guide How Everything Fits Together";
    var mkdocs_page_input_path = "Beginners-Guide/Beginners-Guide-How-Everything-Fits-Together.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> CMaNGOS Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Main Page</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../FAQ-Frequently-Asked-Questions/">Frequently Asked Questions</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../Installation-Instructions/">Installation Guide</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="https://github.com/cmangos/issues/issues">Bug Reports & Issues</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">CMaNGOS Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>Beginners Guide How Everything Fits Together</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>So you know what Github is, what CMaNGOS stands for and you have a general idea of what a database is. Hopefully you also understand what the realmd and mangosd applications are as well. How do all of these things communicate with each other and make it so you can play WoW on your own server? Read on and find out!</p>
<h1 id="why-so-many-pieces">Why So Many Pieces?</h1>
<p>An MMO is a massively complicated piece of work and so it takes many different pieces to make it run. It's not as simple as playing a game on your local computer like The Sims or Skyrim. Why? Well in those types of games all of the information is stored on your computer and there is no need to be online to play them. They have their own databases built into the game and there is only one player so you only have to load each room or area where the player is. In an MMO, however, the entire game world is always running and there are multiple players communicating and interacting with it. Furthermore, variables throughout the world cannot be saved locally because: (1) the more information that is on the client, the more potential for hacking and exploiting there is because players have access to the client; and (2) different players interact with the same world which responds to their actions. Therefore information needs to be saved in a neutral location, otherwise information stored on one player's client would suddenly become unavailable to other players when that player disconnected from the game. All of this necessitates the concept of having a single "server" that hosts the world and multiple "clients" that connect to it.</p>
<h3 id="the-game-server">The Game Server</h3>
<p>The mangosd.exe application is the server which runs the realm and all the events that happen inside of it. The game server not only hosts the physical environment but also manages all non-player actions and events such as NPCs and creatures, the weather system, game events like the various seasonal festivals, and pretty much anything else you can think of that isn't your character moving around.</p>
<h3 id="the-client">The Client</h3>
<p>The wow.exe application is the client which players use to launch the game and connect to and communicate with the game server.</p>
<h3 id="the-login-server">The Login Server</h3>
<p>You can't just connect to a server without having created an account first and so we need a login server to manage accounts and passwords. This is the realmd.exe application which also directs connecting clients to the realm that they want to play on after authenticating the player's login credentials.</p>
<h3 id="the-database">The Database</h3>
<p>Even if we have a mangosd.exe and a realmd.exe running, there still needs to be a place to store the accounts and passwords and the objects and things in the game as well as the many variables associated with a single player; and so we have a third server called the database to store all of this information.</p>
<h1 id="how-they-work-together">How They Work Together</h1>
<p>So you have your servers running and you are ready to try it out. You launch wow.exe...</p>
<p>The first thing that happens is the client attempts to find a login server at the location you told it to look: the address you entered into the realmlist.wtf document. Say you want the client to look for a login server on the same computer that you are running wow.exe: you would direct it to 127.0.0.1 (a universal address for your local computer to connect to itself). Because you have realmd.exe running, the client finds it and you are now ready to login. You type in some credentials and the server tells you that they are wrong, why? Because the login server needs to have your account stored somewhere in order to accept your credentials.</p>
<p>So now you switch over to your mangosd.exe application to create a new account. You type in the command "account create user password" which then adds a new account to the "realmd" MySQL database with the name "user" and the password "password."</p>
<p>You can now go back to your wow.exe client and type in the new credentials; the login server accepts your connection and allows you to select a realm to enter and begin playing. There will only be one available realm which by default is called "Mangos." You click on the realm and it loads the characters screen. Because this account was just created there are no saved characters so you create a new human warrior called "test" and enter the world.</p>
<p>As soon as you create test the human warrior, it is assigned an id number and all of the starting statistics, skills, abilities, and items are added to the "characters" MySQL database. Any time anything with the character changes, mangosd.exe will send an update to the MySQL database with the new information and save it there (character saves also occur at regular intervals in case the server crashes).</p>
<p>So you talked to the guard and moved around a bit and you are ready to start slaying some wolves. You target a wolf and right click to begin attacking. Because you are standing too far away the game tells you that you must move closer. You run up to the wolf and as soon as you are within range, you swing and take the wolf down to 50% health and it begins attacking you back. You may not realize it but a dozen processes and checks were just executed for that simple encounter.</p>
<ol>
<li>
<p><strong>You right clicked on the creature</strong>: the game server checked to see if you were in range by comparing your coordinates stored locally on the client to the coordinates of the creature stored in the "mangos" database. When it determined that you were not within range for a melee attack, it returned an error and a message that you are out of range (and probably played a bit of audio of your character saying something like "I'm out of range").</p>
</li>
<li>
<p><strong>You ran up to the wolf until you were in range</strong>: your melee attack attempts to connect every few seconds (based on your weapon's attack speed) and so every time it tries to attack it checks your coordinates vs. your target's to see if you are in range. Because you were moving toward your target, the game repeated this check probably several times before it finally "passed" because you were in range.</p>
</li>
<li>
<p><strong>You hit the wolf and take it's health down by 50%</strong>: so the game confirmed that you were in range and that you hit your target. It checked your weapon's attack damage against the wolf's defenses and randomly calculated an amount of damage based on those variables. It then subtracted that amount from the wolf's health.</p>
</li>
<li>
<p><strong>The wolf begins attacking you</strong>: the wolf creature template is associated with a certain script which determines its behavior. Because this script tells it to defend itself, the game server directed the wolf to attack the hostile player hitting it.</p>
</li>
</ol>
<p>Now let's say you want to create a guild. You travel to Stormwind and talk to the guildmaster dude to get a charter. You then get some friends to sign the charter (after of course managing to get your server setup so that other players can connect to it) and go back to the guildmaster. You submit your charter and voila... your guild is created. In that transaction mangosd.exe accepted input from the wow.exe client and then sent a command to the "characters" MySQL database to store: the name of the guild, the guild master, the tabard design and emblem, the various characters who are now members and their ranks, and a number of other variables.</p>
<p>As you can see, every little action and exchange of information is incredibly complicated and requires a lot of quick and efficient communication between the client and the multiple pieces of the server.</p>
<h1 id="diagram-of-client-server-interactions">Diagram of Client-Server Interactions</h1>
<p><img alt="" src="http://i.imgur.com/gYCNnGS.png" /></p>
<h2 id="whats-next">What's Next?</h2>
<p>Now you can move on to the installation instructions and get started! Remember that the forums and the #cmangos IRC channel are full of people available to help you with any issues so don't be afraid to ask. Once you have a server up and running we encourage you to participate in the community, report bugs, and if you have some programming skills, try your hand at fixing or enhancing the repositories. There is plenty of information on the forums about how to participate and help out.</p>
<p><a href="Beginners-Guide-Home">Beginner's Guide Home</a></p>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
